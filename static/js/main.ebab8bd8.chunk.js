(this.webpackJsonppathways=this.webpackJsonppathways||[]).push([[0],{126:function(e,t,n){e.exports={node:"Node_node__38uoJ",icon:"Node_icon__354W4",onPatientPath:"Node_onPatientPath__3LPjE",actionable:"Node_actionable__bHXKd",notOnPatientPath:"Node_notOnPatientPath__24OpF",expandedNode:"Node_expandedNode__1ar-A",childOnPatientPath:"Node_childOnPatientPath__28UD6",childActionable:"Node_childActionable__SwUjD",childNotOnPatientPath:"Node_childNotOnPatientPath__2j4QB"}},127:function(e,t,n){e.exports={infoTable:"ExpandedNode_infoTable__3v2tx",descTitle:"ExpandedNode_descTitle__15ki8",desc:"ExpandedNode_desc__3Xdkf",externalLink:"ExpandedNode_externalLink__1Mr1x",defaultTextButton:"ExpandedNode_defaultTextButton__2Bvq6",commentsForm:"ExpandedNode_commentsForm__3Q20Y",footer:"ExpandedNode_footer__FOCYI",comments:"ExpandedNode_comments__9q-JW"}},1272:function(e,t,n){},1273:function(e,t,n){e.exports={dropdown:"DropDown_dropdown__1KvCw"}},1274:function(e,t,n){e.exports=n.p+"static/media/camino-logo-dark.c8fc712a.png"},1277:function(e,t,n){e.exports={pathwayPopup:"PathwayPopup_pathwayPopup__2moYb"}},1288:function(e,t,n){e.exports={root:"Graph_root__1SJOc"}},1302:function(e,t,n){e.exports=n(1911)},138:function(e,t,n){e.exports={record:"PatientRecord_record__2CgGD",recordToggle:"PatientRecord_recordToggle__2Vhvd",sidebar:"PatientRecord_sidebar__1Box0",element:"PatientRecord_element__RKq2B",title:"PatientRecord_title__2U0uE",expand:"PatientRecord_expand__M9HFP",visualizerContainer:"PatientRecord_visualizerContainer__PamdD"}},139:function(e,t,n){e.exports={fieldContainer:"ReportSection_fieldContainer__3LwUq",field:"ReportSection_field__Cxwdy",sectionContainer:"ReportSection_sectionContainer__3gJ8s",sectionIconContainer:"ReportSection_sectionIconContainer__3pp4w",icon:"ReportSection_icon__1NGg-",notesField:"ReportSection_notesField__67Cly"}},148:function(e,t,n){"use strict";(function(e){var a=n(71),i=n(85),r=n(184),o=new(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t),this.config=e.CONFIG?Object(a.a)({},e.CONFIG,{},n):Object(a.a)({},n)}return Object(r.a)(t,[{key:"get",value:function(e,t){var n=e.split("."),a=this.config,i=null;for(var r in n){a=i=a[n[r]]}return i||t}},{key:"add",value:function(e){e&&(this.config=Object(a.a)({},this.config,{},e))}}]),t}());t.a=o}).call(this,n(86))},149:function(e,t,n){e.exports={selectButton:"ActionButton_selectButton___qB5R",accept:"ActionButton_accept__28b2D",decline:"ActionButton_decline__zz-vG",smallActionButton:"ActionButton_smallActionButton__1bPWu",largeActionButton:"ActionButton_largeActionButton__blRdA",largeDecline:"ActionButton_largeDecline__wz9Zw",mediumActionButton:"ActionButton_mediumActionButton__3EpOp"}},1649:function(e,t){},1651:function(e,t){},1672:function(e,t){},174:function(e,t,n){e.exports={missingDataPopup:"MissingDataPopup_missingDataPopup__A-EBJ",popupContent:"MissingDataPopup_popupContent__24BvC",popupTrigger:"MissingDataPopup_popupTrigger__11eAy",popupChoice:"MissingDataPopup_popupChoice__5oEld",selected:"MissingDataPopup_selected__20Or7",footer:"MissingDataPopup_footer__1wJXm",externalLink:"MissingDataPopup_externalLink__3oYt-"}},1911:function(e,t,n){"use strict";n.r(t);n(1303),n(1311);var a=n(0),i=n.n(a),r=n(44),o=n.n(r),c=n(1291),s=n(172),l=n(170),u=n(41),d=n(48),m=n(34),p=n(1944),v=n(1945),f=n(1940),h=n(71),y=n(1293),b={white:"#fff",black:"#222",blue:"#5d89a1",red:"#d95d77",gray:"#4a4a4a",grayMedium:"#bbbdc0",grayBlue:"#cbd5df",grayLighter:"#eaeef2",green:"#2fa874"},j={fontFamily:"'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif"},g=Object(y.a)({typography:Object(h.a)({},j),palette:{primary:{main:b.blue},secondary:{main:b.red},common:b,background:{default:b.grayLighter},text:{primary:b.gray,secondary:b.gray}}}),E=Object(y.a)({typography:Object(h.a)({},j),palette:{primary:{main:b.blue},secondary:{main:b.red},common:b,background:{default:b.grayBlue},text:{primary:b.black,secondary:b.black}}}),_=Object(a.createContext)((function(){})),w=function(e){var t=e.children,n=Object(a.useState)(g),r=Object(u.a)(n,2),o=r[0],c=r[1],s=Object(a.useCallback)((function(){c((function(e){return e===g?E:g}))}),[]);return i.a.createElement(f.a,{theme:o},i.a.createElement(_.Provider,{value:s},t))},P=n(1272),C=n.n(P),O=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(a.useContext)(_),s=function(){o(null)};return i.a.createElement("header",{className:C.a.header},i.a.createElement("img",{src:e.logo,alt:"logo"}),i.a.createElement("button",{onClick:function(e){o(e.currentTarget)},"aria-controls":"options-menu","aria-haspopup":"true"},i.a.createElement(d.a,{icon:m.h})),i.a.createElement(p.a,{id:"options-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:s},i.a.createElement(v.a,{onClick:function(){c(),s()}},"Toggle Theme")))},N=n(1942),x=n(46),k=Object(a.createContext)({patient:null,setPatient:function(){}}),R=function(e){var t=e.children,n=e.value;return null==n.patient?i.a.createElement("div",null,"Loading..."):i.a.createElement(k.Provider,{value:n},t)},S=function(){return Object(a.useContext)(k)},D=n(211),M=n.n(D),T=Object(N.a)((function(e){return{"patient-snapshot-list":{color:e.palette.text.primary}}}),{name:"PatientSnapshot"}),q=function(){var e=T(),t=S().patient,n=Object(a.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.find((function(e){return"official"===e.use}))||e[0];return t?"".concat((t.given||[]).join(" ")," ").concat(t.family):"No name"}(t.name)}),[t]),r=Object(a.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0];return t?[t.city,t.state].filter((function(e){return!!e})).join(", "):"No Address"}(t.address)}),[t]),o=Object(a.useMemo)((function(){return function(e){if(!e)return 0;var t=new Date,n=new Date(e),a=t.getFullYear()-n.getFullYear(),i=t.getMonth()-n.getMonth();return(i<0||0===i&&t.getDate()<n.getDate())&&a--,a}(t.birthDate)}),[t]);return i.a.createElement("div",{className:M.a.patientSnapshot},i.a.createElement(d.a,{icon:m.w,className:M.a.patientSnapshot__photo}),i.a.createElement("div",{className:M.a.patientSnapshot__info},i.a.createElement("div",{className:M.a.patientName},n),i.a.createElement("ul",{className:Object(x.a)(M.a.patientSnapshot__list,e["patient-snapshot-list"])},i.a.createElement("li",null,"DOB: ",t.birthDate," (Age: ",o,")"),i.a.createElement("li",null,"Admin. Sex: ",t.gender),i.a.createElement("li",null,"Location: ",r))))},A=n(1292),L=n(1273),I=n.n(L),B=function(e){var t=e.options,n=e.label,r=e.id,o=e.visible,c=e.onChange,s=e.selectedValue,l=e.setSelectPathway,u=Object(a.useCallback)((function(e){c&&c(null==e?null:e)}),[c]);return o?i.a.createElement("div",{className:I.a.dropdown},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:r},n),i.a.createElement("button",{onClick:function(){l(!0)}},"Explore Pathways")),i.a.createElement(A.a,{classNamePrefix:"DropDown",inputId:r,value:s,onChange:u,options:t,"aria-label":n})):i.a.createElement("div",null)},z=n(240),F=n.n(z),U=Object(a.createContext)({evaluatedPathway:null,setEvaluatedPathway:function(){},updateEvaluatedPathways:function(){}}),H=function(e){var t=e.children,n=e.pathwayCtx;return i.a.createElement(U.Provider,{value:n},t)},G=function(){return Object(a.useContext)(U)},V=Object(N.a)((function(e){return{navigation:{backgroundColor:e.palette.background.default,color:e.palette.text.primary}}}),{name:"Navigation"}),W=function(e){var t,n=e.evaluatedPathways,a=e.selectPathway,r=e.setSelectPathway,o=e.onBack,c=V(),s=G(),l=null===(t=s.evaluatedPathway)||void 0===t?void 0:t.pathway,u=void 0===l?null:{label:l.name,value:s.evaluatedPathway},p=n.map((function(e){return{label:e.pathway.name,value:e}}));return i.a.createElement("nav",{className:Object(x.a)(F.a.navigation,c.navigation)},i.a.createElement("div",{className:F.a.navigation__leftPanel},o&&i.a.createElement(d.a,{icon:m.f,className:F.a.navigation__back,onClick:o}),i.a.createElement(q,null)),i.a.createElement("div",{className:F.a.navigation__rightPanel},i.a.createElement(B,{label:"Pathway:",id:"patient-view",visible:!a,options:p,selectedValue:u,setSelectPathway:r,onChange:function(e){null!==e&&"value"in e&&s.setEvaluatedPathway(e.value)}})))},J=n(1274),Q=n.n(J),X=["ReferralRequest:patient","DocumentManifest:patient","Goal:patient","Consent:patient","DocumentReference:patient","ImagingManifest:patient","RiskAssessment:patient","CareTeam:patient","ImagingStudy:patient","FamilyMemberHistory:patient","Encounter:patient","DeviceRequest:patient","AllergyIntolerance:patient","CarePlan:patient","EpisodeOfCare:patient","Procedure:patient","List:patient","Immunization:patient","VisionPrescription:patient","ProcedureRequest:patient","Flag:patient","Observation:patient","DiagnosticReport:patient","NutritionOrder:patient","Condition:patient","Composition:patient","DetectedIssue:patient","SupplyDelivery:patient","ClinicalImpression:patient","DeviceUseStatement:patient","Task:subject","Task:requester","Task:patient","Task:owner","Task:focus","Task:based-on","SupplyRequest:requester","Specimen:subject","Specimen:patient","ServiceDefinition:successor","ServiceDefinition:predecessor","ServiceDefinition:depends-on","ServiceDefinition:derived-from","ServiceDefinition:composed-of","Sequence:patient","Schedule:actor","RiskAssessment:subject","ResearchSubject:patient","ResearchSubject:individual","RequestGroup:subject","RequestGroup:participant","RequestGroup:patient","RequestGroup:definition","RelatedPerson:patient","ReferralRequest:subject","ReferralRequest:requester","QuestionnaireResponse:subject","QuestionnaireResponse:source","QuestionnaireResponse:patient","QuestionnaireResponse:author","Provenance:target","Provenance:entity-ref","Provenance:patient","Provenance:agent","ProcessResponse:request","ProcedureRequest:subject","ProcedureRequest:replaces","ProcedureRequest:performer","ProcedureRequest:based-on","Procedure:subject","Procedure:performer","PlanDefinition:successor","PlanDefinition:predecessor","PlanDefinition:derived-from","PlanDefinition:depends-on","PlanDefinition:composed-of","Person:patient","Person:link","PaymentNotice:response","PaymentNotice:request","Patient:link","Observation:subject","Observation:performer","MessageHeader:focus","MedicationStatement:source","MedicationStatement:subject","MedicationRequest:subject","MedicationRequest:requester","MedicationDispense:subject","MedicationDispense:receiver","MedicationDispense:performer","MedicationAdministration:subject","MedicationRequest:patient","MedicationAdministration:patient","MedicationStatement:patient","MedicationDispense:patient","MedicationAdministration:performer","Media:subject","Media:patient","MeasureReport:patient","Measure:successor","Measure:predecessor","Measure:derived-from","Measure:depends-on","Measure:composed-of","List:subject","List:item","List:source","Library:successor","Library:predecessor","Library:derived-from","Library:composed-of","Library:depends-on","ImplementationGuide:resource","ImmunizationRecommendation:patient","ImagingManifest:author","GuidanceResponse:subject","GuidanceResponse:patient","Group:member","Goal:subject","Flag:subject","Flag:author","ExplanationOfBenefit:patient","ExplanationOfBenefit:payee","EnrollmentRequest:subject","EnrollmentRequest:patient","Encounter:subject","EligibilityRequest:patient","DocumentReference:subject","DocumentReference:related-ref","DocumentReference:author","DocumentManifest:subject","DocumentManifest:related-ref","DocumentManifest:content-ref","DocumentManifest:recipient","DiagnosticReport:subject","DocumentManifest:author","DeviceUseStatement:subject","DeviceRequest:subject","DeviceRequest:priorrequest","DeviceRequest:performer","DeviceRequest:based-on","Device:patient","DetectedIssue:implicated","Coverage:subscriber","Coverage:policy-holder","Coverage:payor","Contract:term-topic","Coverage:beneficiary","Contract:subject","Contract:signer","Contract:patient","Contract:agent","Consent:data","Consent:consentor","Consent:actor","Condition:subject","Condition:evidence-detail","Condition:asserter","Composition:subject","Composition:entry","Composition:author","Composition:attester","CommunicationRequest:subject","CommunicationRequest:sender","CommunicationRequest:requester","CommunicationRequest:recipient","CommunicationRequest:patient","CommunicationRequest:based-on","Communication:subject","Communication:recipient","Communication:sender","Communication:patient","Communication:part-of","Communication:based-on","ClinicalImpression:subject","ClaimResponse:patient","Claim:payee","Claim:patient","ChargeItem:subject","ChargeItem:patient","ChargeItem:participant-actor","ChargeItem:enterer","CareTeam:subject","CareTeam:participant","CarePlan:performer","CarePlan:subject","BodySite:patient","Basic:subject","Basic:patient","Basic:author","AuditEvent:patient","AuditEvent:entity","AuditEvent:agent","AppointmentResponse:patient","AppointmentResponse:actor","Appointment:patient","Appointment:actor","AllergyIntolerance:recorder","AllergyIntolerance:asserter","AdverseEvent:subject","AdverseEvent:recorder","ActivityDefinition:successor","ActivityDefinition:predecessor","ActivityDefinition:depends-on","ActivityDefinition:derived-from","ActivityDefinition:composed-of","Account:subject","Account:patient"],Y=n(1275),K=n(148),Z=K.a.get("mapper"),$=Y.mappers[Z],ee=$?new $:null,te=function(e){return ee&&e&&(e=ee.execute(e)),e};function ne(e,t){t.push("Patient:_id");var n=[];return t.forEach((function(t){t=t.split(":");var a=e.request("".concat(t[0],"?").concat(t[1],"=").concat(e.patient.id),{flat:!0,pageLimit:0}).then((function(e){if(e.length>0)return e})).catch((function(e){console.log("failed to fetch ".concat(t)),console.error(e)}));n.push(a)})),Promise.all(n).then((function(e){return e.filter((function(e){return e})).flat()}))}function ae(e,t,n){var a=t.join("&_revinclude=");return e.request("/Patient?_id=".concat(e.patient.id,"&_revinclude=").concat(a),{flat:!0}).then((function(e){return e})).catch((function(a){console.log("Reverse Include query failed, manually fetching resources instead."),console.error(a),n(e,t)}))}var ie=Object(a.createContext)({patient:{}}),re=function(e){var t=e.client,n=e.children;return i.a.createElement(ie.Provider,{value:t},n)},oe=function(){return Object(a.useContext)(ie)},ce=Object(a.createContext)({patientRecords:[],setPatientRecords:function(){},evaluatePath:!0,setEvaluatePath:function(){},mcodeRecords:{},setMcodeRecords:function(){}}),se=function(e){var t=e.children,n=e.value;return i.a.createElement(ce.Provider,{value:n},t)},le=function(){return Object(a.useContext)(ce)},ue=n(128),de=n(138),me=n.n(de);function pe(e){return fetch("./static/cql/".concat(e)).then((function(e){return e.text()}))}function ve(e,t){return('define "'+t+'":\n\t').concat(e)}function fe(e,t){return e.concat("\n","\n",t)}function he(e){return"transitions"in e&&e.transitions.length>1}var ye=/.*;boundary=(Boundary.*);?.*/g,be=/Content-Disposition: form-data; name="([^"]+)"/,je=/(\{[^]*\})/,ge=/include .* called (.*)/g,Ee=K.a.get("cqlToElmWebserviceUrl");var _e=n(185),we=n(1276);function Pe(e,t,n){var a;a=n?new _e.Library(t,new _e.Repository(n)):new _e.Library(t);var i=new _e.Executor(a),r=new we.PatientSource.FHIRv400(e);return r.loadBundles(e),i.exec(r)}function Ce(e,t,n,a){for(var i=Object.values(a).filter((function(e){return e.onPath})).map((function(e){return e.state})),r=0,o=Object.entries(e.states);r<o.length;r++){var c=o[r],s=Object(u.a)(c,2),l=s[0],d=s[1];if(!i.includes(l))if("action"in d){if(t[l]&&t[l].length){var m=t[l][0];m.state=l,m.onPath=!1,m.resource=Re(m,n),a[l]=Object(h.a)({},m)}}else{var p=!0,v=!1,f=void 0;try{for(var y,b=d.transitions[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var j=y.value;if(j.condition)if(t[j.condition.description]&&t[j.condition.description].length){var g=t[j.condition.description][0];g.state=l,g.onPath=!1,g.resource=Re(g,n),a[l]=Object(h.a)({},g)}else{var E=ke(j.condition.description,n);if(E){var _={resourceType:"DocumentReference",status:E.status,id:E.id,state:l,onPath:!1,resource:E};a[l]=Object(h.a)({},_)}}}}catch(w){v=!0,f=w}finally{try{p||null==b.return||b.return()}finally{if(v)throw f}}}}return a}function Oe(e,t){return e.state=t,e}function Ne(e,t){return function(e){return"completed"===e.status}(e)&&0!==t.transitions.length?[t.transitions[0].transition]:[]}function xe(e,t,n,a){var i=e.states[n];if("action"in i){var r,o=t[n];if(null===(r=o)||void 0===r?void 0:r.length)return{nextStates:Ne(o=o[0],i),documentation:Oe(o,n),status:"status"in o?o.status:"unknown"};var c=ke(i.label,a);if(c){var s={resourceType:"DocumentReference",id:c.id?c.id:"unknown",status:"status"in c?c.status:"unknown",state:n,resource:c,onPath:!0};return{nextStates:Ne(s,i),documentation:Oe(s,n),status:s.status}}return null}return 1===i.transitions.length?{nextStates:[i.transitions[0].transition],documentation:{state:n,onPath:!0},status:"completed"}:i.transitions.length>1?function(e,t,n,a){var i=[],r=[],o=!0,c=!1,s=void 0;try{for(var l,u=t.transitions[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var d=l.value;if(d.condition){var m,p=null;if(null===(m=e[d.condition.description])||void 0===m?void 0:m.length)p=e[d.condition.description][0];else{var v=ke(d.condition.description,a);v&&(p={resourceType:"DocumentReference",id:v.id?v.id:"unknown",status:v.status,state:n,resource:v,onPath:!0})}p&&(r.push(d.transition),i.push(p))}}}catch(f){c=!0,s=f}finally{try{o||null==u.return||u.return()}finally{if(c)throw s}}return r.length&&i.length?{nextStates:r,documentation:Oe(i[0],n),status:i[0].status}:null}(t,i,n,a):null}function ke(e,t){var n=t.find((function(t){if("DocumentReference"!==t.resourceType)return!1;var n=t;if(void 0===n.identifier)return!1;var a=!0,i=!1,r=void 0;try{for(var o,c=n.identifier[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value;if("pathways.documentreference"===s.system&&s.value===btoa(e))return!0}}catch(l){i=!0,r=l}finally{try{a||null==c.return||c.return()}finally{if(i)throw r}}return!1}));return n||null}function Re(e,t){var n=void 0;return"resourceType"in e&&t&&(n=t.find((function(t){return t.resourceType===e.resourceType&&t.id===e.id}))),n}function Se(e,t,n){var a;return((null===(a=t.elm)||void 0===a?void 0:a.navigational)?Te(e,t.elm.navigational):function(e){return pe(e.library).then((function(t){var n=t;for(var a in e.states){var i=e.states[a];if("cql"in i)n=fe(n,ve(i.cql,a));else if(he(i)){var r=!0,o=!1,c=void 0;try{for(var s,l=i.transitions[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value.condition;if(u)n=fe(n,ve(u.cql,u.description))}}catch(d){o=!0,c=d}finally{try{r||null==l.return||l.return()}finally{if(o)throw c}}}}return n}))}(t).then((function(t){return Me(e,t)}))).then((function(e){return function(e,t,n){for(var a={},i=["Start"],r=xe(e,t,"Start",n);null!==r&&null!==r.documentation;){var o=r.documentation;if(o.onPath=!0,o.resource=Re(r.documentation,n),a[r.documentation.state]=Object(h.a)({},o),0===r.nextStates.length)break;if(1===r.nextStates.length)i=r.nextStates,r=xe(e,t,r.nextStates[0],n);else{i=[];var c=[],s=!0,l=!1,u=void 0;try{for(var d,m=r.nextStates[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var p=d.value;ke(e.states[p].label,n)||t[p]&&t[p].length?c.push(p):i.push(p)}}catch(v){l=!0,u=v}finally{try{s||null==m.return||m.return()}finally{if(l)throw u}}if(0!==c.length)i=c;else if(0===i.length){i=r.nextStates;break}r=xe(e,t,c.length?c[0]:i[0],n)}}return{patientId:t.Patient.id.value,currentStates:i,documentation:Ce(e,t,n,a)}}(t,e,n)}))}function De(e,t){var n;return((null===(n=t.elm)||void 0===n?void 0:n.criteria)?Te(e,t.elm.criteria):function(e){return pe(e.library).then((function(t){var n=t,a=!0,i=!1,r=void 0;try{for(var o,c=e.criteria[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value;n=fe(n,ve(s.cql,s.elementName))}}catch(l){i=!0,r=l}finally{try{a||null==c.return||c.return()}finally{if(i)throw r}}return n}))}(t).then((function(t){return Me(e,t)}))).then((function(e){return function(e,t){var n=[],a=0;return e.criteria.forEach((function(e){var i=t[e.elementName];Array.isArray(i)&&(i=i[0]);var r="unknown",o=!1;i&&(r=i.value,o=i.match),o&&(a+=1);var c={elementName:e.elementName,expected:e.expected,actual:r,match:o};n.push(c)})),{pathwayName:e.name,matches:a,criteriaResultItems:n}}(t,e)}))}function Me(e,t){return function(e){var t=ge.exec(e);return t?pe("".concat(t[1],".cql")).then((function(e){return new Promise((function(t,n){setTimeout((function(){t({FHIRHelpers:e})}),300)}))})):new Promise((function(e,t){e({})}))}(t).then((function(e){return Object.keys(e).length>0?function(e){var t=new FormData;return Object.keys(e.libraries).forEach((function(n,a){t.append("".concat(n),e.libraries[n])})),t.append("main",e.main),fetch(Ee,{method:"POST",body:t}).then((function(e){var t=e.headers.get("content-type"),n="";if(t){var a=ye.exec(t);n=a?"--".concat(a[1]):""}var i={main:{},libraries:{}};return e.text().then((function(e){return e.split(n).reduce((function(e,t,n){var a=je.exec(t);if(a){var i=be.exec(t);i&&"main"===i[1]?e[i[1]]=JSON.parse(a[1]):i&&(e.libraries[i[1]]=JSON.parse(a[1]))}return e}),i)}))}))}({main:t,libraries:e}):function(e){return fetch(Ee,{method:"POST",headers:{"Content-Type":"application/cql",Accept:"application/elm+json"},body:e}).then((function(e){return e.json()}))}(t)})).then((function(t){return Te(e,t)}))}function Te(e,t){return new Promise((function(n,a){var i;i="main"in t?Pe(e,t.main,t.libraries):Pe(e,t);var r=Object.keys(i.patientResults);n(i.patientResults[r[0]])}))}var qe=["Pathway","Mcode","Patient","Condition","Observation","DiagnosticReport","MedicationRequest","AllergyIntolerance","CarePlan","Procedure","Encounter","Immunization"],Ae=function(e,t){var n;return null!==(n=t.get(e))&&void 0!==n?n:[]},Le=function(e){var t=e.recordSection,n=e.resources,r=Object(a.useState)(!1),o=Object(u.a)(r,2),c=o[0],s=o[1],l=c?m.g:m.e,p=["Patient","Pathway","Mcode"].includes(t)?"":"(".concat(n.length,")");return i.a.createElement("div",{className:me.a.element},i.a.createElement("div",{className:me.a.title,onClick:function(){return s(!c)}},i.a.createElement("div",null,t," ",p),i.a.createElement("div",{className:me.a.expand},i.a.createElement(d.a,{icon:l}))),c&&i.a.createElement("div",{className:me.a.visualizerContainer},i.a.createElement(Ie,{recordSection:t,resourcesByType:n})))},Ie=function(e){var t=e.recordSection,n=e.resourcesByType,a=S().patient;return"Pathway"===t?i.a.createElement(Be,null):"Mcode"===t?i.a.createElement(ze,null):"Patient"===t?i.a.createElement(ue.h,{patient:a}):"Condition"===t?i.a.createElement(ue.c,{rows:n}):"Observation"===t?i.a.createElement(ue.g,{rows:n}):"DiagnosticReport"===t?i.a.createElement(ue.j,{rows:n}):"MedicationRequest"===t?i.a.createElement(ue.f,{rows:n}):"AllergyIntolerance"===t?i.a.createElement(ue.a,{rows:n}):"CarePlan"===t?i.a.createElement(ue.b,{rows:n}):"Procedure"===t?i.a.createElement(ue.i,{rows:n}):"Encounter"===t?i.a.createElement(ue.d,{rows:n}):"Immunization"===t?i.a.createElement(ue.e,{rows:n}):i.a.createElement("div",null,"Unsupported Resource")},Be=function(){var e=le().patientRecords,t=G().evaluatedPathway,n=Object(a.useState)(null),r=Object(u.a)(n,2),o=r[0],c=r[1];return Object(a.useEffect)((function(){var n={resourceType:"Bundle",type:"searchset",entry:e.map((function(e){return{resource:e}}))};t&&De(n,t.pathway).then((function(e){return c(e)}))}),[t,e]),i.a.createElement("table",null,i.a.createElement("tbody",null,null===o||void 0===o?void 0:o.criteriaResultItems.map((function(e){return i.a.createElement("tr",{key:e.elementName},i.a.createElement("td",null,e.elementName),i.a.createElement("td",null,e.actual))}))))},ze=function(){var e=le().mcodeRecords,t=[];for(var n in e)t.push(n);return i.a.createElement("table",null,i.a.createElement("tbody",null,t.map((function(t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t),i.a.createElement("td",null,e[t]?e[t]:"-"))}))))},Fe=function(e){var t=e.headerElement,n=le().patientRecords,r=Object(a.useRef)(null),o=Object(a.useState)(!1),c=Object(u.a)(o,2),s=c[0],l=c[1],p=function(e){var t=new Map;return e.forEach((function(e){var n,a=null!==(n=e.resourceType)&&void 0!==n?n:"";if(qe.includes(a)){var i=t.get(a);i?i.push(e):t.set(a,[e])}})),t}(n),v=function(){l(!s)};return Object(a.useEffect)((function(){(null===r||void 0===r?void 0:r.current)&&(null===t||void 0===t?void 0:t.current)&&(r.current.style.height=window.innerHeight-t.current.clientHeight+"px")}),[s,t]),s?i.a.createElement("div",{className:me.a.record,ref:r},i.a.createElement("div",{className:me.a.sidebar},qe.map((function(e){return i.a.createElement(Le,{recordSection:e,resources:Ae(e,p),key:e})}))),i.a.createElement("div",{className:me.a.recordToggle,onClick:v},i.a.createElement(d.a,{icon:m.f}))):i.a.createElement("div",{className:me.a.record},i.a.createElement("div",{className:me.a.recordToggle,onClick:v},i.a.createElement(d.a,{icon:m.m})))},Ue=n(297),He=n(508),Ge=n.n(He),Ve=K.a.get("graphLayoutProvider","dagre");function We(e,t){return"dagre"===Ve?function(e,t){var n=Object.keys(e.states),a=new Ge.a.graphlib.Graph;a.setGraph({}),a.setDefaultEdgeLabel((function(){return{}})),n.forEach((function(n){var i=e.states[n],r=t[n];r?a.setNode(n,{label:i.label,width:r.width,height:r.height}):a.setNode(n,{label:i.label,width:10*i.label.length,height:50}),i.transitions.forEach((function(e){var t=e.condition?{label:e.condition.description,width:25,height:20}:{};a.setEdge(n,e.transition,t)}))})),Ge.a.layout(a);for(var i={},r=a.node("Start").x,o=0,c=n;o<c.length;o++){var s=c[o],l=a.node(s);i[s]={x:l.x-r-l.width/2,y:l.y-l.height/2}}var u={};return a.edges().forEach((function(e){var t=a.edge(e),n="".concat(e.v,", ").concat(e.w),i=t.label?{text:t.label,x:t.x-r,y:t.y}:null;u[n]={label:i,start:e.v,end:e.w,points:t.points.map((function(e){return{x:e.x-r,y:e.y}}))}})),{nodeCoordinates:i,edges:u}}(e,t):function(e){var t="Start",n=function(e){var n,a={};for(n in e.states)a[n]={label:n,rank:NaN,horizontalPosition:NaN,children:[],parents:[],canMove:!0};return Object.keys(e.states).forEach((function(t){e.states[t].transitions.forEach((function(e){a[t].children.includes(e.transition)||a[t].children.push(e.transition),a[e.transition].parents.includes(t)||a[e.transition].parents.push(t)}))})),a[t].rank=0,a}(e),a=[[t]],i=110,r=100,o=0;do{var c=!0,s=!1,l=void 0;try{for(var u,d=a[o][Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var m=u.value;y(n[m],o+1)}}catch(j){s=!0,l=j}finally{try{c||null==d.return||d.return()}finally{if(s)throw l}}o++}while(a.length!==o);for(p(n[t],-50),o=1;o<a.length;o++)v(o);return{nodeCoordinates:function(){var e={};for(var t in n){var a=n[t];e[t]={x:a.horizontalPosition,y:a.rank*r}}return e}(),edges:{}};function p(e,t){if(isNaN(e.horizontalPosition)||e.canMove){e.horizontalPosition=t;for(var n=1;f(e);){var a=n%2===0?-1:1;e.horizontalPosition=t+a*Math.ceil(n/2)*i,n+=1}}}function v(e){var t=!0,r=!1,o=void 0;try{for(var c,s=function(){var e=c.value,t=n[e];if(!isNaN(t.horizontalPosition))return"continue";var a=t.parents.filter((function(e){return n[e].rank<t.rank}));if(1===a.length){var r=t.parents[0],o=n[r];if(o.children.length%2===1)p(n[o.children[Math.floor(o.children.length/2)]],o.horizontalPosition);!function(e){var t=e.children.filter((function(e){return isNaN(n[e].horizontalPosition)||n[e].canMove}));if(0!==t.length)if(1!==t.length){t.length%2===1&&t.splice(Math.ceil(t.length/2),1);for(var a=0;a<t.length/2;a++){var r=n[t[t.length/2-a-1]];p(r,e.horizontalPosition-(a+1)*i),r.canMove=!1,p(r=n[t[t.length/2+a]],e.horizontalPosition+(a+1)*i),r.canMove=!1}}else p(n[t[0]],e.horizontalPosition)}(o)}else{var s=a.map((function(e){return n[e].horizontalPosition})).reduce((function(e,t){return e+t}),0);p(t,s/a.length)}},l=a[e][Symbol.iterator]();!(t=(c=l.next()).done);t=!0)s()}catch(j){r=!0,o=j}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}}function f(e){var t=a[e.rank].map((function(e){return n[e]})),i=!0,r=!1,o=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){if(h(e,c.value))return!0}}catch(j){r=!0,o=j}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return!1}function h(e,t){return!function(e,t){return e.label===t.label}(e,t)&&(!isNaN(e.rank)&&!isNaN(e.horizontalPosition)&&!isNaN(t.rank)&&!isNaN(t.horizontalPosition)&&e.rank===t.rank&&e.horizontalPosition===t.horizontalPosition)}function y(e,t){e.children.forEach((function(i){var r=n[i];r.rank<e.rank?(a[r.rank].splice(a[r.rank].indexOf(i),1),b(i,t),y(r,t+1)):isNaN(r.rank)&&b(i,t)}))}function b(e,t){try{a[t].push(e)}catch(j){a[t]=[e]}finally{n[e].rank=t}}}(e)}var Je=n(126),Qe=n.n(Je),Xe=n(89),Ye=n.n(Xe),Ke=n(174),Ze=n.n(Ke),$e=n(1943),et=n(1277),tt=n.n(et),nt=function(e){var t=e.Content,n=e.Trigger,a=e.popupPosition,r=e.open,o=e.setOpen,c=e.className;return i.a.createElement($e.a,{content:t,position:a||"bottom right",className:"".concat(tt.a.pathwayPopup," ").concat(c),on:"click",open:r,onOpen:function(){o&&o(!0)},onClose:function(){o&&o(!1)},pinned:!0,trigger:n})},at=n(149),it=n.n(at),rt=function(e){var t=e.type,n=e.onClick;return i.a.createElement("button",{className:"".concat(it.a.largeActionButton," ").concat(Ye.a.button," ").concat("decline"===t&&it.a.largeDecline),type:"button",onClick:n},t[0].toUpperCase()+t.slice(1))},ot=function(e){var t=e.type,n=e.onClick;return i.a.createElement("div",{className:"".concat("accept"===t?it.a.accept:it.a.decline," ").concat(it.a.smallActionButton),onClick:n,"data-testid":t},i.a.createElement(d.a,{icon:"accept"===t?m.c:m.t}))},ct=function(e){var t=e.type,n=e.onClick;return i.a.createElement("div",{className:"".concat("accept"===t?it.a.accept:it.a.decline," ").concat(it.a.mediumActionButton),onClick:n,"data-testid":t},i.a.createElement(d.a,{icon:"accept"===t?m.c:m.t}),{accept:"Submit",decline:"Cancel"}[t])},st=function(e){var t=e.type,n=e.size,a=e.onClick;switch(n){case"small":return i.a.createElement(ot,{type:t,onClick:a});case"large":return i.a.createElement(rt,{type:t,onClick:a});case"medium":return i.a.createElement(ct,{type:t,onClick:a})}},lt=Object(a.createContext)({user:"",setUser:function(){}}),ut=function(e){var t=e.children,n=e.value;return i.a.createElement(lt.Provider,{value:n},t)},dt=Object(a.createContext)({note:null,setNote:function(){}}),mt=function(e){var t,n=e.children,r=e.date,o=S().patient,c=Object(a.useContext)(lt).user,s=(null===o||void 0===o?void 0:o.name)?yt(o.name):"",l=Object(a.useState)({patient:s,date:r.toDateString(),physician:c,birthdate:(null===o||void 0===o?void 0:o.birthDate)||"",mcodeElements:{},pathway:null===(t=G().evaluatedPathway)||void 0===t?void 0:t.pathway.name,status:"Pending"}),d=Object(u.a)(l,2),m=d[0],p=d[1];return i.a.createElement(dt.Provider,{value:{note:m,setNote:p}},n)},pt=function(){return Object(a.useContext)(dt)},vt=function(e){var t="";return Object.keys(e.mcodeElements).forEach((function(n){t+="".concat(n,": ").concat(e.mcodeElements[n],"\n")})),"Date: ".concat(e.date,"\n\nPatient: ").concat(e.patient,"\n\nBirthdate: ").concat(e.birthdate,"\n\nPhysician: ").concat(e.physician,"\n\n").concat(t,"\nPathway: ").concat(e.pathway,"\n\nNode: ").concat(e.node,"\n\nStatus: ").concat(e.status,"\n\nTreatment: ").concat(e.treatment,"\n\nNotes: ").concat(e.notes,"\n  ")},ft=n(1286),ht=n(1946);function yt(e){var t,n,a,i,r,o,c,s="";Array.isArray(e)&&(s=[null===(t=e[0])||void 0===t?void 0:null===(n=t.prefix)||void 0===n?void 0:n.join(" "),null===(a=e[0])||void 0===a?void 0:null===(i=a.given)||void 0===i?void 0:i.join(" "),null===(r=e[0])||void 0===r?void 0:r.family,null===(o=e[0])||void 0===o?void 0:null===(c=o.suffix)||void 0===c?void 0:c.join(" ")].join(" "));return s}function bt(e,t,n){return{resourceType:"DocumentReference",id:Object(ht.a)(),meta:{lastUpdated:gt()},status:"current",subject:{reference:"Patient/".concat(n.id)},identifier:[{system:"pathways.documentreference",value:btoa(t)}],content:[{attachment:{data:btoa(e),contentType:"text/plain"}}],type:{coding:[{system:"http://loinc.org",code:"34108-1",display:"Outpatient Note"}]},indexed:""}}function jt(e,t,n,a,i){e.status=n,e.notes=a,i&&(e.treatment=i.action[0].description,e.node=i.label);var r=["","",""];return t.forEach((function(t){var n;if((null===(n=t.meta)||void 0===n?void 0:n.profile)&&t.meta.profile.length){var a=["TNMClinicalPrimaryTumorCategory","TNMClinicalRegionalNodesCategory","TNMClinicalDistantMetastasesCategory"],i=t.meta.profile[0];if("Observation"===t.resourceType)if(i.includes("TumorMarkerTest")&&"Observation"===t.resourceType){var o,c=t,s=null===(o=c.valueCodeableConcept)||void 0===o?void 0:o.text,l=c.code.text;s&&l&&(e.mcodeElements[l]=s)}else if(a.some((function(e){return i.includes(e)}))){var u=a.findIndex((function(e){return i.includes(e)}));if(u>-1){var d,m=null===(d=t.valueCodeableConcept)||void 0===d?void 0:d.text;m&&(r[u]=m)}}}})),e.mcodeElements["Clinical TNM"]=r.join(" "),vt(e)}function gt(){var e=new Date;return e.getFullYear()+"-"+Et(e.getMonth())+"-"+Et(e.getDay())+"T"+Et(e.getUTCHours())+":"+Et(e.getUTCMinutes())+":"+Et(e.getUTCSeconds())+"."+e.getUTCMilliseconds()+"+00:00"}function Et(e){return e<10?"0"+e:e.toString()}function _t(e){var t,n,a,i=[null===(t=e["Tumor Category"])||void 0===t?void 0:t.split(" ")[0],null===(n=e["Node Category"])||void 0===n?void 0:n.split(" ")[0],null===(a=e["Metastases Category"])||void 0===a?void 0:a.split(" ")[0]].join(" ");return"   "===i?"Unknown":i}var wt=function(e){var t=e.values,n=e.setOpen,r=S().patient,o=oe(),c=le(),s=c.patientRecords,d=c.setPatientRecords,m=Object(a.useState)(!1),p=Object(u.a)(m,2),v=p[0],f=p[1],h=Object(a.useState)(""),y=Object(u.a)(h,2),b=y[0],j=y[1],g=pt().note;return i.a.createElement("div",null,i.a.createElement("div",{className:Ze.a.popupContent},"Select Value:",i.a.createElement("div",null,t.map((function(e){return i.a.createElement("div",{key:e,className:Ze.a.popupChoice+" "+(b===e?Ze.a.selected:""),onClick:function(){v&&b===e?(f(!1),j("")):(f(!0),j(e))}},e)})))),i.a.createElement("div",{className:Ze.a.footer},i.a.createElement(st,{size:"small",type:"decline",onClick:function(){return n(!1)}}),v&&i.a.createElement(st,{size:"small",type:"accept",onClick:function(){if(n(!1),g){var e,t=bt(jt(g,s,"completed",b),b,r);d([].concat(Object(l.a)(s),[t])),null===o||void 0===o||null===(e=o.create)||void 0===e||e.call(o,t)}}})))},Pt=function(e){var t=e.values,n=Object(a.useState)(!1),r=Object(u.a)(n,2),o=r[0],c=r[1];return i.a.createElement(nt,{Content:i.a.createElement(wt,{values:t,setOpen:c}),className:Ze.a.missingDataPopup,Trigger:i.a.createElement("div",{className:Ze.a.popupTrigger},"missing data",i.a.createElement(d.a,{icon:m.i,className:Ze.a.externalLink})),open:o,setOpen:c})},Ct=n(127),Ot=n.n(Ct),Nt=n(139),xt=n.n(Nt),kt=n(1287),Rt=n.n(kt),St=function(e){var t=e.sectionTitle,n=e.value;return i.a.createElement("div",{className:xt.a.field},i.a.createElement("b",null,t,": "),i.a.createElement("span",null,n))},Dt=function(e){var t=e.icon,n=e.notes;return i.a.createElement("div",{className:xt.a.sectionContainer},i.a.createElement("div",{className:xt.a.sectionIconContainer},i.a.createElement(d.a,{icon:t,className:xt.a.icon})),i.a.createElement("div",{className:xt.a.notesField},i.a.createElement("b",null,"Physician Notes: "),i.a.createElement("div",null,n)))},Mt=function(e){var t=e.icon,n=e.fields;return i.a.createElement("div",{className:xt.a.sectionContainer},i.a.createElement("div",{className:xt.a.sectionIconContainer},i.a.createElement(d.a,{icon:t,className:xt.a.icon})),i.a.createElement("div",{className:xt.a.fieldContainer},n.filter((function(e){return e.name})).map((function(e){return i.a.createElement(St,{sectionTitle:e.name,value:e.value,key:Rt.a.generate()})}))))},Tt=n(242),qt=n.n(Tt),At=function(e){var t,n,a,r,o,c=e.onConfirm,s=e.onDecline,l=pt().note,u=le().mcodeRecords,d=[{name:"Date",value:null===l||void 0===l?void 0:l.date},{name:"Patient",value:null===l||void 0===l?void 0:l.patient},{name:"Date of Birth",value:null===l||void 0===l?void 0:l.birthdate},{name:"Physician",value:null===l||void 0===l?void 0:l.physician}],p=[{name:"Primary Cancer",value:null!==(t=u["Primary Cancer"])&&void 0!==t?t:"Unknown"},{name:"Laterality",value:null!==(n=u.Laterality)&&void 0!==n?n:"Unknown"},{name:"Clinical TNM",value:_t(u)},{name:"Estrogen Receptor",value:null!==(a=u["Estrogen Receptor"])&&void 0!==a?a:"Unknown"},{name:"Progesterone Receptor",value:null!==(r=u["Progesterone Receptor"])&&void 0!==r?r:"Unknown"},{name:"HER2 Receptor",value:null!==(o=u["HER2 Receptor"])&&void 0!==o?o:"Unknown"}],v=[{name:"Pathway Selected",value:null===l||void 0===l?void 0:l.pathway},{name:"Recommendation",value:null===l||void 0===l?void 0:l.node},{name:"Pathway Status",value:null===l||void 0===l?void 0:l.status}];return i.a.createElement("div",{className:qt.a.reportModal},i.a.createElement("h1",null,"Pathway Report"),i.a.createElement("div",{className:qt.a.sectionContainer},i.a.createElement(Mt,{icon:m.v,fields:d}),i.a.createElement(Mt,{icon:m.m,fields:p}),i.a.createElement(Mt,{icon:m.q,fields:v}),(null===l||void 0===l?void 0:l.notes)&&i.a.createElement(Dt,{icon:m.r,notes:null===l||void 0===l?void 0:l.notes})),i.a.createElement("div",{className:qt.a.confirmationSection},i.a.createElement("i",null,"The above note will be written into the EHR and any procedure requests will be submitted."),i.a.createElement("div",{className:qt.a.confirmationButtonGroup},i.a.createElement(st,{size:"medium",type:"accept",onClick:c}),i.a.createElement(st,{size:"medium",type:"decline",onClick:s}))))};function Lt(e){var t=e.action;return!!t&&t.length>0}var It=Object(a.memo)((function(e){var t,n=e.pathwayState,r=e.isActionable,o=e.isGuidance,c=e.documentation,s=pt(),d=s.note,m=s.setNote,p=Object(a.useState)(!1),v=Object(u.a)(p,2),f=v[0],y=v[1],b=le(),j=b.patientRecords,g=b.setPatientRecords,E=oe(),_=S().patient;d&&(d.node=n.label);var w=function(e){var t=Object(l.a)(j);if(d){var a,i,r=bt(jt(d,j,d.status,null!==(a=null===d||void 0===d?void 0:d.notes)&&void 0!==a?a:"",n),n.label,_);t.push(r),null===E||void 0===E||null===(i=E.create)||void 0===i||i.call(E,r)}if("Accepted"===(null===d||void 0===d?void 0:d.status)&&e&&e.length>0){var o,c=function(e,t){var n=e.resourceType,a={id:Object(ht.a)(),resourceType:n,intent:"order",subject:{reference:"Patient/".concat(t)},status:"active",authoredOn:(new Date).toISOString(),meta:{lastUpdated:(new Date).toISOString()}};switch(n){case"ServiceRequest":var i=e.code;return Object(h.a)({},a,{code:i});case"MedicationRequest":var r=e.medicationCodeableConcept;return Object(h.a)({},a,{medicationCodeableConcept:r});default:throw Error("Translation for ".concat(n," not implemented."))}}(e[0].resource,_.id);t.push(c),null===E||void 0===E||null===(o=E.create)||void 0===o||o.call(E,c)}g(t)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ft,{isGuidance:o,isActionable:r,pathwayState:n,documentation:c,setComments:function(e){m((function(t){return Object(h.a)({},t,{notes:e})}))},comments:null!==(t=null===d||void 0===d?void 0:d.notes)&&void 0!==t?t:"",onAccept:function(){m((function(e){return Object(h.a)({},e,{status:"Accepted"})})),y(!0)},onDecline:function(){m((function(e){return Object(h.a)({},e,{status:"Declined"})})),y(!0)}}),f&&i.a.createElement(At,{onConfirm:function(){return w(n.action)},onDecline:function(){return y(!1)}}))})),Bt=function(e){var t=e.title,n=e.description;return i.a.createElement("tr",null,i.a.createElement("td",{className:Ot.a.descTitle},t),i.a.createElement("td",{className:Ot.a.desc},n))},zt=function(e){var t,n,a=e.documentation;if(!(null===a||void 0===a?void 0:a.resource))return null;var r=a.status,o=null===(t=a.resource)||void 0===t?void 0:null===(n=t.meta)||void 0===n?void 0:n.lastUpdated;return o?i.a.createElement(Bt,{key:"Status",title:r,description:new Date(o).toLocaleString("en-us")}):null};var Ft=Object(a.memo)((function(e){var t,n=e.documentation,a=e.pathwayState,r=e.isGuidance,o=e.isActionable,c=e.comments,s=e.setComments,l=e.onAccept,u=e.onDecline,p=r&&function(e,t){var n,a,r=e.action[0].resource,o=void 0!==r.medicationCodeableConcept?null===r||void 0===r?void 0:null===(n=r.medicationCodeableConcept)||void 0===n?void 0:n.coding:null===r||void 0===r?void 0:null===(a=r.code)||void 0===a?void 0:a.coding,c=[i.a.createElement(Bt,{key:"Notes",title:"Notes",description:e.action[0].description}),i.a.createElement(Bt,{key:"Type",title:"Type",description:r.resourceType}),i.a.createElement(Bt,{key:"System",title:"System",description:i.a.createElement(i.a.Fragment,null,o&&o[0].system,i.a.createElement("a",{href:o&&o[0].system,target:"_blank",rel:"noopener noreferrer"},i.a.createElement(d.a,{icon:m.j,className:Ot.a.externalLink})))}),i.a.createElement(Bt,{key:"Code",title:"Code",description:o&&o[0].code}),i.a.createElement(Bt,{key:"Display",title:"Display",description:o&&o[0].display})];if(null===t||void 0===t?void 0:t.resource)switch(t.resourceType){case"Procedure":var s=t.resource,l=s.performedPeriod&&s.performedPeriod.start||s.performedDateTime,u=s.performedPeriod&&s.performedPeriod.end;l&&c.push(i.a.createElement(Bt,{key:"Start",title:"Start",description:new Date(l).toLocaleString("en-us")})),u&&c.push(i.a.createElement(Bt,{key:"End",title:"End",description:new Date(u).toLocaleString("en-us")}))}return c}(a,n),v=!Lt(t=a)&&t.transitions.length>1&&function(e,t){var n=[];if(null===e||void 0===e?void 0:e.resource)switch(e.resourceType){case"Observation":var a,r=e.resource,o=null===(a=r.valueCodeableConcept)||void 0===a?void 0:a.coding;o&&n.push(i.a.createElement(Bt,{key:"ValueSystem",title:"System",description:i.a.createElement(i.a.Fragment,null,o[0].system,i.a.createElement("a",{href:o[0].system,target:"_blank",rel:"noopener noreferrer"},i.a.createElement(d.a,{icon:m.j,className:Ot.a.externalLink})))}),i.a.createElement(Bt,{key:"ValueCode",title:"Code",description:o[0].code}),i.a.createElement(Bt,{key:"ValueDisplay",title:"Display",description:o[0].display}));var c=r.effectiveDateTime;c&&n.push(i.a.createElement(Bt,{key:"Date",title:"Date",description:new Date(c).toLocaleString("en-us")}));break;case"DocumentReference":var s=e.resource,l=s.subject;l&&n.push(i.a.createElement(Bt,{key:"subject",title:"Subject",description:l.reference}));var u=s.identifier,p=null===u||void 0===u?void 0:u.find((function(e){return"pathways.documentreference"===e.system}));if(p){var v=atob(p.value);n.push(i.a.createElement(Bt,{key:"value",title:"Value",description:v}))}else{var f=s.content[0].attachment.data;f&&n.push(i.a.createElement(Bt,{key:"note",title:"Note",description:atob(f)}))}break;default:n.push(i.a.createElement(Bt,{key:"error",title:"Error",description:"Unsupported Resource Type"}))}else{var h=t.transitions.map((function(e){var t,n=null===(t=e.condition)||void 0===t?void 0:t.description;return n||""})).filter((function(e,t,n){return n.indexOf(e)===t}));n.push(i.a.createElement(Bt,{key:"value",title:"Value",description:i.a.createElement(Pt,{values:h})}))}return n}(n,a),f="The patient and I discussed the treatment plan, risks, benefits and alternatives.  The patient expressed understanding and wants to proceed.";return i.a.createElement("div",{className:Ye.a.expandedNode},i.a.createElement("table",{className:Ot.a.infoTable},i.a.createElement("tbody",null,i.a.createElement(zt,{documentation:n}),p||v)),o&&r&&i.a.createElement("form",{className:Ot.a.commentsForm},i.a.createElement("label",null,"Comments:"),i.a.createElement("button",{className:"".concat(Ye.a.button," ").concat(Ot.a.defaultTextButton),onClick:function(e){e.preventDefault(),c.includes(f)||s(c+f)}},"Use Default Text"),i.a.createElement("textarea",{className:Ot.a.comments,value:c,onChange:function(e){return s(e.target.value)}}),i.a.createElement("div",{className:Ot.a.footer},i.a.createElement(st,{type:"accept",size:"large",onClick:l})),i.a.createElement("div",{className:Ot.a.footer},i.a.createElement(st,{type:"decline",size:"large",onClick:u}))))})),Ut=It,Ht=Object(N.a)((function(e){return{"not-on-patient-path":{backgroundColor:e.palette.background.default,color:e.palette.text.primary},"child-not-on-patient-path":{borderColor:e.palette.background.default}}}),{name:"Node"}),Gt=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.pathwayState,a=e.documentation,r=e.isOnPatientPath,o=e.isCurrentNode,c=e.xCoordinate,s=e.yCoordinate,l=e.expanded,u=void 0!==l&&l,d=e.onClickHandler,m=n.label,p={top:s,left:c},v=Ht(),f=r?Qe.a.onPatientPath:Object(x.a)(Qe.a.notOnPatientPath,v["not-on-patient-path"]),h=o&&!a,y=[Qe.a.node,f],b="";u&&y.push(Ye.a.expanded),h?(y.push(Qe.a.actionable),b=Qe.a.childActionable):b=r?Qe.a.childOnPatientPath:Object(x.a)(Qe.a.childNotOnPatientPath,v["child-not-on-patient-path"]);var j=Lt(n),g=r&&j&&!h?"DocumentReference"!==(null===a||void 0===a?void 0:a.resourceType):null,E=null;return"action"in n?E=r?g:!(!j||!a)||null:!o&&a&&(E=!0),i.a.createElement("div",{className:y.join(" "),style:p,ref:t},i.a.createElement("div",{className:"".concat(Ye.a.nodeTitle," ").concat(d&&Ye.a.clickable),onClick:d},i.a.createElement("div",{className:Ye.a.iconAndLabel},i.a.createElement(Vt,{pathwayState:n,isGuidance:j}),m),i.a.createElement(Wt,{status:E})),u&&i.a.createElement("div",{className:"".concat(Qe.a.expandedNode," ").concat(b)},i.a.createElement(Ut,{pathwayState:n,isActionable:h,isGuidance:j,documentation:a})))}))),Vt=function(e){var t=e.pathwayState,n=e.isGuidance,a=m.k;if("Start"===t.label&&(a=m.n),n){var r=t;if(r.action.length>0){var o=r.action[0].resource.resourceType;"MedicationRequest"===o?a=m.p:"MedicationAdministration"===o?a=m.a:"Procedure"===o&&(a=m.s)}}return i.a.createElement(d.a,{icon:a,className:Qe.a.icon})},Wt=function(e){var t=e.status;if(null==t)return null;var n=t?m.d:m.u;return i.a.createElement("div",{className:Ye.a.statusIcon},i.a.createElement(d.a,{icon:n,className:Qe.a.icon}))},Jt=Gt,Qt=n(303),Xt=n.n(Qt),Yt=function(e){var t=e.points,n=e.arrowheadId,a=e.widthOffset,r=t.map((function(e){return{x:e.x+a,y:e.y}})),o=r.length;r[o-1].y-=17.5;var c,s="M ".concat(r[0].x," ").concat(r[0].y," ");return c=o%3,s=r.reduce((function(e,t,n,a){return n%3!==c?e:"".concat(e," C ").concat(t.x," ").concat(t.y," ").concat(a[n+1].x," ").concat(a[n+1].y," ").concat(a[n+2].x,"\n        ").concat(a[n+2].y)}),s),i.a.createElement("path",{d:s,fill:"transparent",markerEnd:"url(#".concat(n,")")})},Kt=function(e){var t=e.edge,n=e.edgeName,a=e.isOnPatientPath,r=e.widthOffset,o=a?Xt.a.arrowOnPatientPath:Xt.a.arrow,c=n.replace(" ",""),s="arrowhead-".concat(c),l=t.label;return i.a.createElement("svg",{className:o},i.a.createElement(Yt,{points:t.points,arrowheadId:s,widthOffset:r}),l?i.a.createElement("text",{x:l.x+r,y:l.y},l.text):null,i.a.createElement("defs",null,i.a.createElement("marker",{id:s,className:Xt.a.arrowhead,markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto"},i.a.createElement("polygon",{points:"0 0, 10 3.5, 0 7"}))))},Zt=n(1288),$t=n.n(Zt),en=n(1289),tn=n.n(en),nn=function(e){return Object.values(e.documentation).filter((function(e){return e.onPath})).map((function(e){return e.state}))},an=function(e,t){var n=nn(e),a=n.indexOf(t.start),i=n.indexOf(t.end);return-1!==a&&-1!==i&&a+1===i||!(a!==n.length-1||!e.currentStates.includes(t.end))},rn=Object(a.memo)((function(e){var t,n,r,o=e.evaluatedPathway,c=e.interactive,s=void 0===c||c,l=e.expandCurrentNode,d=void 0===l||l,m=e.updateEvaluatedPathways,p=le(),v=p.patientRecords,f=o.pathway,y=Object(a.useRef)(null),b=Object(a.useRef)({}),j=Object(a.useState)(null!==(t=null===y||void 0===y?void 0:null===(n=y.current)||void 0===n?void 0:null===(r=n.parentElement)||void 0===r?void 0:r.clientWidth)&&void 0!==t?t:0),g=Object(u.a)(j,2),E=g[0],_=g[1],w=Object(a.useCallback)((function(e){p.setEvaluatePath(!1),m({pathway:o.pathway,pathwayResults:e})}),[o.pathway,m,p]),P=Object(a.useCallback)((function(){var e={};return(null===b||void 0===b?void 0:b.current)&&Object.keys(b.current).forEach((function(t){var n=b.current[t],a=n.clientWidth,i=Array.from(n.children).reduce((function(e,t){return e+t.clientHeight}),0);e[t]={width:a,height:i}})),We(f,e)}),[f]),C=Object(a.useState)(P()),O=Object(u.a)(C,2),N=O[0],x=O[1],k=N.nodeCoordinates,R=N.edges,S=Object(a.useMemo)((function(){return void 0!==k?Object.values(k).map((function(e){return e.y})).reduce((function(e,t){return Math.max(e,t)})):0}),[k]),D=void 0!==k?Object.values(k).map((function(e){return e.x+E/2})).reduce((function(e,t){return Math.min(e,t)})):0;if(D<0){var M=-1*D;Object.keys(k).forEach((function(e){k[e].x+=M})),Object.keys(R).forEach((function(e){var t=R[e];t.points.forEach((function(e){return e.x+=M})),t.label&&(t.label.x+=M)}))}var T=Object.keys(N).toString(),q=Object(a.useMemo)((function(){return T.split(",").reduce((function(e,t){return e[t]=!1,e}),{})}),[T]),A=Object(a.useState)(q),L=Object(u.a)(A,2),I=L[0],B=L[1],z=Object(a.useCallback)((function(e,t){B((function(t){return Object(h.a)({},t,Object(Ue.a)({},e,!t[e]))}))}),[]);Object(a.useEffect)((function(){var e=!1;if(v.length>0&&(!o.pathwayResults||p.evaluatePath))return Se({resourceType:"Bundle",type:"searchset",entry:v.map((function(e){return{resource:e}}))},f,v).then((function(t){e||w(t)})),function(){e=!0}}),[f,v,o.pathwayResults,w,p]),Object(a.useEffect)((function(){if(o.pathwayResults){var e=!0,t=!1,n=void 0;try{for(var a,i=o.pathwayResults.currentStates[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;d&&r&&z(r,!0)}}catch(c){t=!0,n=c}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}),[d,o.pathwayResults,z]),Object(a.useEffect)((function(){var e;(null===(e=y.current)||void 0===e?void 0:e.parentElement)&&new tn.a(y.current.parentElement,(function(){var e,t,n;_(null!==(e=null===(t=y.current)||void 0===t?void 0:null===(n=t.parentElement)||void 0===n?void 0:n.clientWidth)&&void 0!==e?e:0),x(P())}))}),[P]),Object(a.useEffect)((function(){x(P())}),[I,P]);var F=void 0!==R?Object.values(R).map((function(e){return e.label})).map((function(e){return e?e.x+10*e.text.length+E/2:0})).reduce((function(e,t){return Math.max(e,t)}),0):E,U=o.pathwayResults?o.pathwayResults.documentation:{};return i.a.createElement(on,{graphElement:y,interactive:s,maxHeight:S,nodeCoordinates:k,documentation:U,edges:R,evaluatedPathway:o,nodeRefs:b,parentWidth:E,maxWidth:F,pathway:f,expanded:I,setExpanded:z})})),on=Object(a.memo)((function(e){var t=e.graphElement,n=e.interactive,r=e.maxHeight,o=e.nodeCoordinates,c=e.documentation,s=e.edges,l=e.evaluatedPathway,u=e.nodeRefs,d=e.parentWidth,m=e.maxWidth,p=e.pathway,v=e.expanded,f=e.setExpanded;return i.a.createElement("div",{ref:t,id:"graph-root",className:$t.a.root,style:{height:n?r+150:"inherit",width:m+"px",position:"relative",marginRight:"5px"}},void 0!==o?Object.keys(o).map((function(e){var t=c[e],r=Object(a.useCallback)((function(){return n?f(e):void 0}),[e]);return i.a.createElement(mt,{date:new Date(Date.now()),key:e},i.a.createElement(Jt,{key:e,documentation:t,ref:function(t){u.current[e]=t},pathwayState:p.states[e],isOnPatientPath:!!l.pathwayResults&&(nn(l.pathwayResults).includes(e)||l.pathwayResults.currentStates.includes(e)),isCurrentNode:!!l.pathwayResults&&l.pathwayResults.currentStates.includes(e),xCoordinate:o[e].x+d/2,yCoordinate:o[e].y,expanded:v[e],onClickHandler:r}))})):[],i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:m+5,height:r,zIndex:1,top:0,left:0,overflow:"visible"}},void 0!==s?Object.keys(s).map((function(e){var t=s[e];return i.a.createElement(Kt,{key:e,edge:t,edgeName:e,isOnPatientPath:!!l.pathwayResults&&an(l.pathwayResults,t),widthOffset:d/2})})):[]))})),cn=rn,sn=n(75),ln=n.n(sn),un=Object(N.a)((function(e){return{"pathway-element":{backgroundColor:e.palette.background.default},"selected-pathway-element":{backgroundColor:e.palette.primary.main},title:{color:e.palette.text.primary},"selected-title":{color:e.palette.common.white}}}),{name:"PathwaysList"}),dn=function(e){var t=e.evaluatedPathway,n=e.criteria,r=e.callback,o=e.selected,c=un(),s=t.pathway,p=G(),v=Object(a.useState)(!1),f=Object(u.a)(v,2),h=f[0],y=f[1],b=le(),j=b.patientRecords,g=b.setPatientRecords,E=S().patient,_=oe(),w=h?m.g:m.e;var P=Object(x.a)(o&&ln.a.selectedPathwayElement,o&&c["selected-pathway-element"],!o&&ln.a.pathwayElement,!o&&c["pathway-element"]),C=Object(x.a)(ln.a.title,o&&c["selected-title"],!o&&c.title),O={};return o&&(O.title="Pathway is already selected"),i.a.createElement("div",{className:P,role:"list",key:s.name},i.a.createElement("div",{className:C,role:"listitem",onClick:function(e){p.setEvaluatedPathway(t,!0),y(!h)}},i.a.createElement("div",null,s.name),o&&i.a.createElement(d.a,{icon:m.d}),i.a.createElement("div",{className:ln.a.expand},i.a.createElement(d.a,{icon:w})),i.a.createElement("div",{className:ln.a.numElements},null===n||void 0===n?void 0:n.matches)),h&&i.a.createElement("div",{className:ln.a.infoContainer},i.a.createElement("div",{className:ln.a.details},i.a.createElement("p",null,s.description),i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null),i.a.createElement("th",null,"mCODE elements"),i.a.createElement("th",null,"patient elements")),null===n||void 0===n?void 0:n.criteriaResultItems.map((function(e){return i.a.createElement("tr",{key:e.elementName},i.a.createElement("td",null,e.elementName),i.a.createElement("td",null,e.expected),i.a.createElement("td",{className:e.match?ln.a.matchingElement:void 0},e.actual))})))),i.a.createElement("button",Object.assign({},O,{className:Ye.a.button,disabled:o,onClick:function(){var e,n=function(e,t){return{title:e,resourceType:"CarePlan",text:{status:ft.R4.NarrativeStatusKind._generated,div:"<div> Assignment of patient to pathway ".concat(e," </div>")},status:"active",intent:"plan",category:[{coding:[{system:"http://hl7.org/fhir/us/core/CodeSystem/careplan-category",code:"assess-plan"}]}],subject:{reference:"Patient/".concat(t.id)}}}(s.name,E);g([].concat(Object(l.a)(j),[n])),null===_||void 0===_||null===(e=_.create)||void 0===e||e.call(_,n),r(t)}}),"Select Pathway"),i.a.createElement("button",{className:Ye.a.button,onClick:function(){r(t)}},"View Pathway")),i.a.createElement("div",{className:ln.a.pathway},i.a.createElement("div",{style:{height:"100%",overflow:"scroll"}},i.a.createElement(cn,{evaluatedPathway:t,interactive:!1,expandCurrentNode:!1,updateEvaluatedPathways:p.updateEvaluatedPathways})),i.a.createElement("div",{className:ln.a.controls},i.a.createElement(d.a,{icon:m.n}),i.a.createElement(d.a,{icon:m.o}),i.a.createElement(d.a,{icon:m.l})))))},mn=function(e){var t=e.evaluatedPathways,n=e.callback,r=e.service,o=le().patientRecords,c=Object(a.useState)(null),s=Object(u.a)(c,2),l=s[0],p=s[1];if(!l&&t.length>0&&o&&o.length>0){var v={resourceType:"Bundle",type:"searchset",entry:o.map((function(e){return{resource:e}}))},f=t.map((function(e){return De(v,e.pathway)}));Promise.all(f).then((function(e){p(e.sort((function(e,t){return t.matches-e.matches})))}))}var h=function(){var e=o.filter((function(e){return"CarePlan"===e.resourceType})).filter((function(e){return"active"===e.status})).map((function(e){return e.title}));return t.map((function(e){return e.pathway.name})).filter((function(t){return e.includes(t)}))}();return i.a.createElement("div",{className:ln.a.pathways_list},"loading"===r.status?i.a.createElement("div",null,"Loading..."):"loaded"===r.status?i.a.createElement("div",{className:ln.a.container},i.a.createElement("div",{className:ln.a.pathwayListHeaderContainer},i.a.createElement("div",{className:ln.a.header_title},i.a.createElement("div",{className:ln.a.header_title__header},"Explore Pathways"),i.a.createElement("div",{className:ln.a.header_title__note},"Select pathway below to view details")),i.a.createElement("div",{className:ln.a.matchedElementsLabel},i.a.createElement("i",null,"mCODE",i.a.createElement("br",null),"elements",i.a.createElement("br",null),"matched"),i.a.createElement(d.a,{icon:m.b}))),0!==(null===l||void 0===l?void 0:l.length)&&i.a.createElement("div",null,l?l.map((function(e){var a=t.find((function(t){return t.pathway.name===e.pathwayName})),r=(null===a||void 0===a?void 0:a.pathway.name)||"";return a?i.a.createElement(dn,{evaluatedPathway:a,callback:n,criteria:e,selected:h.includes(r),key:r}):i.a.createElement("div",null,"An error occured evaluating the pathway criteria. Please try again.")})):i.a.createElement("div",null,"Loading Pathways..."))):i.a.createElement("div",null,"ERROR"))};var pn=function(e){var t=Object(a.useState)({status:"loading"}),n=Object(u.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){(function(e){return fetch(e,{headers:{Accept:"application/json"}})})(e).then((function(e){return e.json()})).then((function(t){return t.map((function(t){return function(e,t){return fetch(e,t).then((function(e){return e.json()}))}(e+"/"+t)}))})).then((function(e){return Promise.all(e)})).then((function(e){return r({status:"loaded",payload:e})})).catch((function(e){return r({status:"error",error:e})}))}),[e]),i},vn=n(1290),fn=n.n(vn),hn=n(206),yn=n.n(hn),bn=n(85),jn=n(184),gn=function(){function e(){Object(bn.a)(this,e),this.patient={}}return Object(jn.a)(e,[{key:"create",value:function(){return yn.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Mocked create"),e.abrupt("return",Promise.resolve({}));case 2:case"end":return e.stop()}}))}}]),e}(),En=n(513),_n=n.n(En),wn=function(e){var t=e.headerElement,n=e.graphContainerElement,a=e.evaluatedPathway,r=e.updateEvaluatedPathways;return i.a.createElement("div",{className:_n.a.display},i.a.createElement(Fe,{headerElement:t}),a?i.a.createElement("div",{ref:n,className:_n.a.graph},i.a.createElement(cn,{evaluatedPathway:a,expandCurrentNode:!0,updateEvaluatedPathways:r})):i.a.createElement("div",null,"No Pathway Loaded"))},Pn=function(e){var t=e.demoId,n=Object(a.useState)(null),r=Object(u.a)(n,2),o=r[0],c=r[1],s=Object(a.useState)([]),d=Object(u.a)(s,2),m=d[0],p=d[1],v=Object(a.useState)({}),f=Object(u.a)(v,2),h=f[0],y=f[1],b=Object(a.useState)(null),j=Object(u.a)(b,2),g=j[0],E=j[1],_=Object(a.useState)(!0),P=Object(u.a)(_,2),C=P[0],N=P[1],x=Object(a.useState)(!1),k=Object(u.a)(x,2),S=k[0],D=k[1],M=Object(a.useState)([]),T=Object(u.a)(M,2),q=T[0],A=T[1],L=Object(a.useState)(null),I=Object(u.a)(L,2),B=I[0],z=I[1],F=Object(a.useState)(""),U=Object(u.a)(F,2),G=U[0],V=U[1],J=Object(a.useRef)(null),Y=Object(a.useRef)(null),Z=Object(a.useCallback)((function(e){p(e),D(!0)}),[]),$=Object(a.useCallback)((function(e){var t={resourceType:"Bundle",type:"searchset",entry:e.map((function(e){return{resource:e}}))};pe("elm/mCODE.elm.json").then((function(e){var n,a,i,r,o,c,s,l,u=JSON.parse(e),d=Pe(t,u),m=Object.keys(d.patientResults),p=d.patientResults[m[0]],v={"Primary Cancer":null!==(n=p["Primary Cancer Condition Value"][0])&&void 0!==n?n:void 0,Laterality:null!==(a=p["Primary Cancer Condition Body Location Value"][0])&&void 0!==a?a:void 0,"Tumor Category":null!==(i=p["TNM Clinical Primary Tumor Category Data Value (T Category)"][0])&&void 0!==i?i:void 0,"Node Category":null!==(r=p["TNM Clinical Regional Nodes Category Data Value (N Category)"][0])&&void 0!==r?r:void 0,"Metastases Category":null!==(o=p["TNM Clinical Distant Metastases Category Data Value (M Category)"][0])&&void 0!==o?o:void 0,"Estrogen Receptor":null!==(c=p["Estrogen Receptor Value"][0])&&void 0!==c?c:void 0,"Progesterone Receptor":null!==(s=p["Progesterone Receptor Value"][0])&&void 0!==s?s:void 0,"HER2 Receptor":null!==(l=p["HER2 Receptor Value"][0])&&void 0!==l?l:void 0};y(v)}))}),[]),ee=Object(a.useMemo)((function(){return{patientRecords:m,setPatientRecords:Z,evaluatePath:S,setEvaluatePath:D,mcodeRecords:h,setMcodeRecords:$}}),[m,Z,S,D,h,$]);Object(a.useEffect)((function(){if(t){z(new gn);var e=K.a.get("demoPatients")+t+".json";fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.find((function(e){return"Patient"===e.resourceType}));Z(e),$(e),c(t)}))}else fn.a.oauth2.init({clientId:"Input client id you get when you register the app",scope:"launch/patient openid profile"}).then((function(e){var t,n;(function(e){return e.request("/metadata").then((function(t){if(t.rest[0].operation.find((function(e){return"OperationDefinition/Patient--everything"===(e.definition.reference||e.definition)})))return function(e){return e.request("/Patient/".concat(e.patient.id,"/$everything"),{flat:!0,pageLimit:0}).then((function(e){return e}))}(e).then((function(e){return te(e)}));console.log("Cannot use $everything, using reverse includes instead");var n=[],a=[];return t.rest[0].resource.forEach((function(e){if("Patient"===e.type)e.searchRevInclude&&(a=e.searchRevInclude);else if(e.searchInclude){var t=e.searchInclude.filter((function(t){return t==="".concat(e.type,":patient")||t==="".concat(e.type,":subject")}));t.length>0&&n.push(t[0])}else if(e.searchParam){var i=e.searchParams.filter((function(e){return"patient"===e.name||"subject"===e.name}));i.length>0&&n.push("".concat(e.type,":").concat(i[0].name))}})),a.length>0?ae(e,a,ne).then((function(e){return te(e)})):n.length>0?ae(e,n,ne).then((function(e){return te(e)})):(console.log("Cannot use reverse includes, retrieving all resources manually from predefined list"),ne(e,X).then((function(e){return te(e)})))}))})(e).then((function(e){var t=["id","meta","resourceType"];e=e.filter((function(e){return!Object.keys(e).every((function(e){return t.includes(e)}))})),Z(e),$(e)})),null===(t=e.patient)||void 0===t||null===(n=t.read)||void 0===n||n.call(t).then((function(e){return c(e)})),z(e)}))}),[t,Z,$]),Object(a.useEffect)((function(){var e;null===B||void 0===B||null===(e=B.user)||void 0===e||e.read().then((function(e){var t=e.name&&yt(e.name);t&&V(t)}))}),[B]);var ie=pn(K.a.get(t?"demoPathwaysService":"pathwaysService"));function oe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.scrollTo(0,0),N(t),E(e)}Object(a.useEffect)((function(){"loaded"===ie.status&&0===q.length&&A(ie.payload.map((function(e){return{pathway:e,pathwayResults:null}})))}),[ie,q.length,B,m]),Object(a.useEffect)((function(){(null===Y||void 0===Y?void 0:Y.current)&&(null===J||void 0===J?void 0:J.current)&&(Y.current.style.height=window.innerHeight-J.current.clientHeight+"px")}),[C]);var ce=Object(a.useCallback)((function(e){for(var t=Object(l.a)(q),n=0;n<q.length;n++)q[n].pathway.name===e.pathway.name&&(t[n]=e,A(t));(null===g||void 0===g?void 0:g.pathway.name)===e.pathway.name&&E(e)}),[g,q]);return i.a.createElement(w,null,i.a.createElement(re,{client:B},i.a.createElement(ut,{value:{user:G,setUser:V}},i.a.createElement(R,{value:{patient:o,setPatient:c}},i.a.createElement(se,{value:ee},i.a.createElement(H,{pathwayCtx:{updateEvaluatedPathways:ce,evaluatedPathway:g,setEvaluatedPathway:oe}},i.a.createElement("div",{ref:J},i.a.createElement(O,{logo:Q.a}),i.a.createElement(W,{evaluatedPathways:q,selectPathway:C,setSelectPathway:N})),C?i.a.createElement(mn,{evaluatedPathways:q,callback:oe,service:ie}):i.a.createElement(wn,{headerElement:J,graphContainerElement:Y,evaluatedPathway:g,updateEvaluatedPathways:ce})))))))},Cn=document.getElementById("root");o.a.render(i.a.createElement(c.a,null,i.a.createElement(s.c,null,i.a.createElement(s.a,{exact:!0,path:"/",render:function(){return i.a.createElement(Pn,null)}}),i.a.createElement(s.a,{path:"/demo/:id",render:function(e){return i.a.createElement(Pn,{demoId:e.match.params.id,key:e.match.params.id})}}),i.a.createElement(s.a,{path:"/demo",render:function(){return i.a.createElement(Pn,{demoId:"Maureen"})}}))),Cn)},211:function(e,t,n){e.exports={patientSnapshot:"PatientSnapshot_patientSnapshot__3bGcm",patientSnapshot__info:"PatientSnapshot_patientSnapshot__info__2Ry7e",patientName:"PatientSnapshot_patientName__ZClJB",patientSnapshot__photo:"PatientSnapshot_patientSnapshot__photo__3XI7U",patientSnapshot__list:"PatientSnapshot_patientSnapshot__list__5DVC3"}},240:function(e,t,n){e.exports={navigation:"Navigation_navigation__1EgxP",navigation__back:"Navigation_navigation__back__2cVZ2",navigation__leftPanel:"Navigation_navigation__leftPanel__QjHPF",navigation__rightPanel:"Navigation_navigation__rightPanel__1FRD3"}},242:function(e,t,n){e.exports={reportModal:"ReportModal_reportModal__2hppG",sectionContainer:"ReportModal_sectionContainer__1iIQM",confirmationSection:"ReportModal_confirmationSection__2HXo4",confirmationButtonGroup:"ReportModal_confirmationButtonGroup__1FN9I"}},303:function(e,t,n){e.exports={arrow:"Arrow_arrow__3TM91",arrowhead:"Arrow_arrowhead__3XjQ0",arrowOnPatientPath:"Arrow_arrowOnPatientPath__1r5CB"}},341:function(e,t,n){var a={"./alert":342,"./alert.js":342,"./alert.js.map":1540,"./allergyintolerance":343,"./allergyintolerance.js":343,"./allergyintolerance.js.map":1541,"./appointment":344,"./appointment.js":344,"./appointment.js.map":1542,"./appointmentresponse":345,"./appointmentresponse.js":345,"./appointmentresponse.js.map":1543,"./availability":346,"./availability.js":346,"./availability.js.map":1544,"./basic":347,"./basic.js":347,"./basic.js.map":1545,"./binary":348,"./binary.js":348,"./binary.js.map":1546,"./bundle":349,"./bundle.js":349,"./bundle.js.map":1547,"./careplan":350,"./careplan.js":350,"./careplan.js.map":1548,"./claimresponse":351,"./claimresponse.js":351,"./claimresponse.js.map":1549,"./communicationrequest":352,"./communicationrequest.js":352,"./communicationrequest.js.map":1550,"./composition":353,"./composition.js":353,"./composition.js.map":1551,"./conceptmap":354,"./conceptmap.js":354,"./conceptmap.js.map":1552,"./condition":355,"./condition.js":355,"./condition.js.map":1553,"./conformance":356,"./conformance.js":356,"./conformance.js.map":1554,"./contract":357,"./contract.js":357,"./contract.js.map":1555,"./contraindication":358,"./contraindication.js":358,"./contraindication.js.map":1556,"./core":21,"./core.js":21,"./core.js.map":1557,"./coverage":359,"./coverage.js":359,"./coverage.js.map":1558,"./dataelement":360,"./dataelement.js":360,"./dataelement.js.map":1559,"./device":361,"./device.js":361,"./device.js.map":1560,"./devicecomponent":362,"./devicecomponent.js":362,"./devicecomponent.js.map":1561,"./deviceuserequest":363,"./deviceuserequest.js":363,"./deviceuserequest.js.map":1562,"./deviceusestatement":364,"./deviceusestatement.js":364,"./deviceusestatement.js.map":1563,"./diagnosticorder":365,"./diagnosticorder.js":365,"./diagnosticorder.js.map":1564,"./diagnosticreport":366,"./diagnosticreport.js":366,"./diagnosticreport.js.map":1565,"./documentmanifest":367,"./documentmanifest.js":367,"./documentmanifest.js.map":1566,"./documentreference":368,"./documentreference.js":368,"./documentreference.js.map":1567,"./eligibility":369,"./eligibility.js":369,"./eligibility.js.map":1568,"./eligibilityresponse":370,"./eligibilityresponse.js":370,"./eligibilityresponse.js.map":1569,"./encounter":371,"./encounter.js":371,"./encounter.js.map":1570,"./enrollment":372,"./enrollment.js":372,"./enrollment.js.map":1571,"./enrollmentresponse":373,"./enrollmentresponse.js":373,"./enrollmentresponse.js.map":1572,"./explanationofbenefit":374,"./explanationofbenefit.js":374,"./explanationofbenefit.js.map":1573,"./extensiondefinition":375,"./extensiondefinition.js":375,"./extensiondefinition.js.map":1574,"./familyhistory":376,"./familyhistory.js":376,"./familyhistory.js.map":1575,"./group":377,"./group.js":377,"./group.js.map":1576,"./healthcareservice":378,"./healthcareservice.js":378,"./healthcareservice.js.map":1577,"./imagingobjectselection":379,"./imagingobjectselection.js":379,"./imagingobjectselection.js.map":1578,"./imagingstudy":380,"./imagingstudy.js":380,"./imagingstudy.js.map":1579,"./immunization":381,"./immunization.js":381,"./immunization.js.map":1580,"./immunizationrecommendation":382,"./immunizationrecommendation.js":382,"./immunizationrecommendation.js.map":1581,"./list":383,"./list.js":383,"./list.js.map":1582,"./location":384,"./location.js":384,"./location.js.map":1583,"./media":385,"./media.js":385,"./media.js.map":1584,"./medication":386,"./medication.js":386,"./medication.js.map":1585,"./medicationadministration":387,"./medicationadministration.js":387,"./medicationadministration.js.map":1586,"./medicationdispense":388,"./medicationdispense.js":388,"./medicationdispense.js.map":1587,"./medicationprescription":389,"./medicationprescription.js":389,"./medicationprescription.js.map":1588,"./medicationstatement":390,"./medicationstatement.js":390,"./medicationstatement.js.map":1589,"./messageheader":391,"./messageheader.js":391,"./messageheader.js.map":1590,"./models":340,"./models.js":340,"./models.js.map":1591,"./namingsystem":392,"./namingsystem.js":392,"./namingsystem.js.map":1592,"./nutritionorder":393,"./nutritionorder.js":393,"./nutritionorder.js.map":1593,"./observation":394,"./observation.js":394,"./observation.js.map":1594,"./operationdefinition":395,"./operationdefinition.js":395,"./operationdefinition.js.map":1595,"./operationoutcome":396,"./operationoutcome.js":396,"./operationoutcome.js.map":1596,"./oralhealthclaim":397,"./oralhealthclaim.js":397,"./oralhealthclaim.js.map":1597,"./order":398,"./order.js":398,"./order.js.map":1598,"./orderresponse":399,"./orderresponse.js":399,"./orderresponse.js.map":1599,"./organization":400,"./organization.js":400,"./organization.js.map":1600,"./other":401,"./other.js":401,"./other.js.map":1601,"./patient":402,"./patient.js":402,"./patient.js.map":1602,"./paymentnotice":403,"./paymentnotice.js":403,"./paymentnotice.js.map":1603,"./paymentreconciliation":404,"./paymentreconciliation.js":404,"./paymentreconciliation.js.map":1604,"./pendedrequest":405,"./pendedrequest.js":405,"./pendedrequest.js.map":1605,"./practitioner":406,"./practitioner.js":406,"./practitioner.js.map":1606,"./procedure":407,"./procedure.js":407,"./procedure.js.map":1607,"./procedurerequest":408,"./procedurerequest.js":408,"./procedurerequest.js.map":1608,"./profile":409,"./profile.js":409,"./profile.js.map":1609,"./provenance":410,"./provenance.js":410,"./provenance.js.map":1610,"./query":411,"./query.js":411,"./query.js.map":1611,"./questionnaire":412,"./questionnaire.js":412,"./questionnaire.js.map":1612,"./questionnaireanswers":413,"./questionnaireanswers.js":413,"./questionnaireanswers.js.map":1613,"./readjudicate":414,"./readjudicate.js":414,"./readjudicate.js.map":1614,"./referralrequest":415,"./referralrequest.js":415,"./referralrequest.js.map":1615,"./relatedperson":416,"./relatedperson.js":416,"./relatedperson.js.map":1616,"./reversal":417,"./reversal.js":417,"./reversal.js.map":1617,"./riskassessment":418,"./riskassessment.js":418,"./riskassessment.js.map":1618,"./searchparameter":419,"./searchparameter.js":419,"./searchparameter.js.map":1619,"./securityevent":420,"./securityevent.js":420,"./securityevent.js.map":1620,"./slot":421,"./slot.js":421,"./slot.js.map":1621,"./specimen":422,"./specimen.js":422,"./specimen.js.map":1622,"./statusrequest":423,"./statusrequest.js":423,"./statusrequest.js.map":1623,"./statusresponse":424,"./statusresponse.js":424,"./statusresponse.js.map":1624,"./subscription":425,"./subscription.js":425,"./subscription.js.map":1625,"./substance":426,"./substance.js":426,"./substance.js.map":1626,"./supply":427,"./supply.js":427,"./supply.js.map":1627,"./supportingdocumentation":428,"./supportingdocumentation.js":428,"./supportingdocumentation.js.map":1628,"./valueset":429,"./valueset.js":429,"./valueset.js.map":1629};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=341},513:function(e,t,n){e.exports={display:"App_display__2vneK",graph:"App_graph__3EP_l"}},75:function(e,t,n){e.exports={pathways_list:"PathwaysList_pathways_list__2WO5g",header_title:"PathwaysList_header_title__7EM8s",header_title__header:"PathwaysList_header_title__header__36yqh",header_title__note:"PathwaysList_header_title__note__34zC8",container:"PathwaysList_container__1SC5K",selectedPathwayElement:"PathwaysList_selectedPathwayElement__vitfD",title:"PathwaysList_title__ccVmw",numElements:"PathwaysList_numElements__1WAOk",expand:"PathwaysList_expand__2v9Wx",infoContainer:"PathwaysList_infoContainer__2q0Tn",details:"PathwaysList_details__2kSzT",pathway:"PathwaysList_pathway__1vqM1",matchingElement:"PathwaysList_matchingElement__1SQoM",controls:"PathwaysList_controls__vZmz8",pathwayElement:"PathwaysList_pathwayElement__34hJh",matchedElementsLabel:"PathwaysList_matchedElementsLabel__3cXeX",pathwayListHeaderContainer:"PathwaysList_pathwayListHeaderContainer__2l2fi"}},89:function(e,t,n){e.exports={expanded:"styles_expanded__XNUv-",expandedNode:"styles_expandedNode__26Fy8",nodeTitle:"styles_nodeTitle__5mm8f",clickable:"styles_clickable__3HzZZ",iconAndLabel:"styles_iconAndLabel__2LOTu",statusIcon:"styles_statusIcon__2jDwI",button:"styles_button__1AUjr"}}},[[1302,1,2]]]);
//# sourceMappingURL=main.ebab8bd8.chunk.js.map